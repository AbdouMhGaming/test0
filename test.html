<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Device Info Detection</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      background: #f2f2f2;
    }
    h2 {
      color: #333;
    }
    table {
      border-collapse: collapse;
      width: 80%;
      margin-top: 20px;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    th {
      background-color: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>
  <h2>Device Detection Info</h2>
  <table>
    <tr><th>Info</th><th>Value</th></tr>
    <tr><td>Device Fingerprint</td><td id="fingerprint">Loading...</td></tr>
    <tr><td>IP Address</td><td id="ip">Loading...</td></tr>
    <tr><td>User Agent</td><td id="userAgent">Loading...</td></tr>
    <tr><td>Platform</td><td id="platform">Loading...</td></tr>
    <tr><td>Screen Resolution</td><td id="screen">Loading...</td></tr>
    <tr><td>Timezone</td><td id="timezone">Loading...</td></tr>
  </table>

  <!-- FingerprintJS CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
  <script>
    // Load the FingerprintJS agent
    FingerprintJS.load().then(fp => {
      fp.get().then(result => {
        const visitorId = result.visitorId;
        document.getElementById("fingerprint").textContent = visitorId;

        // Optional: send to backend
        // fetch('/store-fingerprint', {
        //   method: 'POST',
        //   headers: { 'Content-Type': 'application/json' },
        //   body: JSON.stringify({ fingerprint: visitorId })
        // });
      });
    });

    // Get IP address using ipify
    fetch("https://api.ipify.org?format=json")
      .then(response => response.json())
      .then(data => {
        document.getElementById("ip").textContent = data.ip;
      });

    // Other browser info
    document.getElementById("userAgent").textContent = navigator.userAgent;
    document.getElementById("platform").textContent = navigator.platform;
    document.getElementById("screen").textContent = screen.width + " x " + screen.height;
    document.getElementById("timezone").textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
  </script>
</body>
</html>
